(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(6),s=n.n(c),a=n(2),r=n(1),o=(n(11),n(12),"https://mate.academy/students-api");n(13);var i=n(0),u=function(t){var e=t.userId,n=t.setSelectDetId,c=t.selectDetId,s=Object(r.useState)(),u=Object(a.a)(s,2),l=u[0],j=u[1];return Object(r.useEffect)((function(){(function(t){return fetch(t?"".concat(o,"/posts?userId=").concat(t):"".concat(o,"/posts")).then((function(t){return t.json()}))})(e).then((function(t){return j(t)}))}),[e]),Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),Object(i.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:null===l||void 0===l?void 0:l.map((function(t){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:"[User #".concat(t.userId,"]:")}),t.title]}),Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c===t.id?n(0):n(t.id)},children:c===t.id?"Close":"Open"})]},t.id)}))})]})},l=n(4),j=n(3),d=n.n(j),m=function(){var t=Object(l.a)(d.a.mark((function t(e){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(o,"/comments?postId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var b=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(o,"/comments"),{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=(n(16),function(t){var e=t.setComments,n=t.postId,c=Object(r.useState)(""),s=Object(a.a)(c,2),o=s[0],u=s[1],j=Object(r.useState)(""),p=Object(a.a)(j,2),h=p[0],f=p[1],O=Object(r.useState)(""),x=Object(a.a)(O,2),v=x[0],_=x[1],N=function(){var t=Object(l.a)(d.a.mark((function t(c){var s,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),s={name:o,email:h,body:v,postId:n},t.next=4,b(s);case 4:return t.next=6,m(n);case 6:a=t.sent,e(a),u(""),f(""),_("");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:N,children:[Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:o,onChange:function(t){u(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:h,onChange:function(t){f(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:v,onChange:function(t){_(t.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),h=(n(17),function(t){var e=t.postId,n=Object(r.useState)(),c=Object(a.a)(n,2),s=c[0],u=c[1],j=Object(r.useState)([]),b=Object(a.a)(j,2),h=b[0],f=b[1],O=Object(r.useState)(!0),x=Object(a.a)(O,2),v=x[0],_=x[1];Object(r.useEffect)((function(){(function(t){return fetch("".concat(o,"/posts/").concat(t)).then((function(t){return t.json()}))})(e).then((function(t){return u(t)})),m(e).then((function(t){return f(t)}))}),[e]);var N=function(){var t=Object(l.a)(d.a.mark((function t(n){var c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s=n,fetch("".concat(o,"/comments/").concat(s),{method:"DELETE"});case 2:return t.next=4,m(e);case 4:c=t.sent,f(c);case 6:case"end":return t.stop()}var s}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),Object(i.jsx)("section",{className:"PostDetails__post",children:Object(i.jsx)("p",{children:null===s||void 0===s?void 0:s.title})}),Object(i.jsxs)("section",{className:"PostDetails__comments",children:[h.length>0?Object(i.jsx)("button",{type:"button",className:"button",onClick:function(){_(!v)},children:v?"Hide ".concat(h.length," comments"):"Show ".concat(h.length," comments")}):Object(i.jsx)("h3",{children:"No comments"}),v&&Object(i.jsx)("ul",{className:"PostDetails__list",children:h.map((function(t){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return N(t.id)},children:"X"}),Object(i.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(p,{setComments:f,postId:e})})})]})}),f=function(){var t=Object(r.useState)(0),e=Object(a.a)(t,2),n=e[0],c=e[1],s=Object(r.useState)(0),l=Object(a.a)(s,2),j=l[0],d=l[1],m=Object(r.useState)([]),b=Object(a.a)(m,2),p=b[0],f=b[1];return Object(r.useEffect)((function(){fetch("".concat(o,"/users")).then((function(t){return t.json()})).then((function(t){return f(t)}))}),[]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",onChange:function(t){return c(+t.target.value)},children:[Object(i.jsx)("option",{value:"0",children:"All users"}),p.map((function(t){return Object(i.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]})}),Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:Object(i.jsx)(u,{userId:n,setSelectDetId:d,selectDetId:j})}),0!==j&&Object(i.jsx)("div",{className:"App__content",children:Object(i.jsx)(h,{postId:j})})]})]})};s.a.render(Object(i.jsx)(f,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.2a0a595e.chunk.js.map